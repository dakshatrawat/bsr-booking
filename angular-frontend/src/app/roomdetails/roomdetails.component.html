<div *ngIf="isLoading" class="loading-container">
    <span class="loading">Loading...</span>
  </div>
  
  <div *ngIf="!isLoading" class="details-container">
    <!-- Room Details -->
    <h2 class="room-title">Room Details</h2>
    <img [src]="getImageUrl(room?.imageUrl)" [alt]="room?.type" class="room-image" (error)="onImageError($event)" />
    <div class="details-info">
      <h3>{{ room?.type }}</h3>
      <p><strong>Room Number:</strong> {{ room?.roomNumber }}</p>
      <p><strong>Capacity:</strong> {{ room?.capacity }}</p>
      <p><strong>Price:</strong> ${{ room?.pricePerNight }} / night</p>
      <p>{{ room?.description }}</p>
    </div>
  
    <!-- Booking Controls -->
    <div class="booking-info">
      <button class="book-now-button" (click)="showDatePicker = !showDatePicker">
        {{ showDatePicker ? 'Hide Calendar' : 'Select Dates' }}
      </button>
  
      <!-- Calendar Component -->
      <div *ngIf="showDatePicker" class="calendar-wrapper">
        <app-calendar 
          [roomId]="roomId" 
          [showRoomBookings]="true"
          (datesSelected)="onDatesSelected($event)">
        </app-calendar>
        
        <div *ngIf="selectedDates.length > 0" class="selected-dates-info">
          <p><strong>Selected Dates ({{ selectedDates.length }}):</strong></p>
          <p>{{ selectedDates.join(', ') }}</p>
        </div>
        
        <button (click)="handleConfirmation()" class="proceed-button" [disabled]="selectedDates.length === 0">
          Proceed
        </button>
        
        <!-- Success and Error Messages -->
        <p *ngIf="message" class="success-message">{{ message }}</p>
        <p *ngIf="error" class="error-message">{{ error }}</p>
      </div>
  
      <!-- Booking Preview and Submit -->
      <div *ngIf="showBookingPreview" class="preview-container">
        <h3>Booking Preview</h3>
        <p><strong>Selected Dates:</strong> {{ selectedDates.join(', ') }}</p>
        <p><strong>Check-in Date:</strong> {{ selectedDates.length > 0 ? selectedDates.sort()[0] : 'N/A' }}</p>
        <p><strong>Check-out Date:</strong> {{ selectedDates.length > 0 ? selectedDates.sort()[selectedDates.length - 1] : 'N/A' }}</p>
        <p><strong>Total Days To Stay:</strong> {{ totalDaysToStay }}</p>
        <p><strong>Total Price:</strong> ${{ totalPrice }}</p>
        <button (click)="acceptBooking()" class="confirm-booking-button">Confirm and Book</button>
        <button class="cancel-button" (click)="cancelBookingPreview()">Cancel</button>
      </div>
    </div>
  </div>
  